name: Auto Issues

on:
  issues:
    types: [opened]

jobs:
  process_issue:
    runs-on: ubuntu-latest
    steps:
      - name: Process Issue Inline
        uses: actions/github-script@v6
        with:
          script: |
            const issue = context.payload.issue;
            const issueBody = issue.body || "";

            // Always add these labels.
            const baseLabels = ["needs_triage", "module"];
            // Determine conditional label.
            if (issueBody.includes("Bug Report")) {
              baseLabels.push("bug");
            } else if (issueBody.includes("Feature Idea") || issueBody.includes("âœ¨ Feature request")) {
              baseLabels.push("feature");
            }
            
            // Add labels to the issue.
            await github.rest.issues.addLabels({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue.number,
              labels: baseLabels,
            });